<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Book</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    {% include "message.html" %}
    <div id="container">
        {% include "navbar.html" %}
        <div id="title-box"><p id="heading">Add Book</p></div>
        <div id="content-box">
            <form action="{% url 'add-book' %}" method="post" id="book-form">
                {% csrf_token %}
                    <input type="text" name="title" id="title" required class="input" placeholder="Title">
                    <input type="text" name="authors" id="authors" required placeholder="Authors" class="input">
                    <input type="text" name="isbn" id="isbn" required placeholder="ISBN" class="input">
                    <input type="text" name="publisher" id="publisher" required placeholder="Publisher" class="input">
                    <input type="number" name="num_pages" id="num_pages" min="1" required placeholder="Number of pages" class="input">
                    <button type="submit" id="submit-button" class="btn">Add Book</button>
            </form>
        </div>
    </div>
    {% if book %}
        <script>
            document.title = "Update Book";
            var title = "{{book.title}}";
            var authors = "{{book.authors}}";
            var isbn = "{{book.isbn}}";
            var publisher = "{{book.publisher}}";
            var num_pages = Number("{{book.num_pages}}");
            document.getElementById("title").value = title;
            document.getElementById("heading").innerText = "Update Book";
            document.getElementById("authors").value = authors;
            document.getElementById("isbn").value = isbn;
            document.getElementById("publisher").value = publisher;
            document.getElementById("num_pages").value = num_pages;
            document.getElementById("book-form").setAttribute("action", "{% url 'edit-book' book.id %}"); 
            document.getElementById("submit-button").innerText = "Update Book";
        </script>
    {% endif %}
    </body>
</html>